(()=>{var e={};e.id=309,e.ids=[309],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},3546:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>l.a,__next_app__:()=>b,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>o}),i(868),i(2758),i(5866);var n=i(3191),r=i(8716),a=i(7922),l=i.n(a),s=i(5231),d={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>s[e]);i.d(t,d);let o=["",{children:["settings",{children:["map-builder",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,868)),"/Users/rohitchandnani/tasting-pos/app/settings/map-builder/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(i.bind(i,2758)),"/Users/rohitchandnani/tasting-pos/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/rohitchandnani/tasting-pos/app/settings/map-builder/page.tsx"],x="/settings/map-builder/page",b={require:i,loadChunk:()=>Promise.resolve()},u=new n.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/settings/map-builder/page",pathname:"/settings/map-builder",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9330:(e,t,i)=>{Promise.resolve().then(i.bind(i,480))},480:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>f});var n=i(326),r=i(7577),a=i.n(r),l=i(579),s=i(2854);let d="tastingpos_layout_v6",o={x:22,y:22},c=()=>Math.random().toString(36).slice(2)+"_"+Date.now().toString(16),x=[{id:"rest",label:"RESTAURANTE"},{id:"terr",label:"TERRAZA"},{id:"vip",label:"ZONA VIP"}];function b(e,t,i){return Math.max(t,Math.min(i,e))}function u(e){return 20*Math.round(e/20)}function p(e,t){return e.pageId||t}function m(e){let t=e.obj||e.shape||"TABLE_SQUARE";return"SQUARE"===t?"TABLE_SQUARE":"ROUND"===t?"TABLE_ROUND":"RECT"===t?"TABLE_RECT":"UMBRELLA"===t||"BAR_SEATS"===t||"TERRACE"===t||"BAR"===t?"TABLE_SQUARE":t||"TABLE_SQUARE"}function h(e){return{w:Number.isFinite(e.w)?e.w:92,h:Number.isFinite(e.h)?e.h:92}}let g=["from-amber-500/8 to-amber-500/0","from-emerald-500/10 to-emerald-500/0","from-fuchsia-500/10 to-fuchsia-500/0"];function f(){let{t:e}=(0,s.Q)(),{tables:t,setTables:i}=(0,l.mr)(),r=a().useRef(null),[f,T]=a().useState(x),[C,A]=a().useState(x[0]?.id??"rest"),[_,P]=a().useState("select"),[S,R]=a().useState(()=>Object.fromEntries(x.map(e=>[e.id,{x:o.x,y:o.y,w:900,h:756}]))),[L,B]=a().useState([]),[I,M]=a().useState([]),[U,O]=a().useState(null),[D,G]=a().useState(null),[q,X]=a().useState(null),W=f[0]?.id??"rest",Y=S[C]??{x:o.x,y:o.y,w:900,h:756},Z=a().useMemo(()=>({x:0,y:0}),[]),$=a().useCallback((e,t)=>({x:e+Z.x,y:t+Z.y}),[Z.x,Z.y]),Q=a().useCallback((e,t)=>({x:e-Z.x,y:t-Z.y}),[Z.x,Z.y]),F=a().useCallback(()=>{let i={version:6,pages:f,pageRects:S,zones:L,walls:I,tables:Object.fromEntries(t.map(e=>[e.id,{x:e.x,y:e.y,w:h(e).w,h:h(e).h,pageId:p(e,W),obj:m(e),name:e.name}]))};localStorage.setItem(d,JSON.stringify(i)),G(e("Saved","Saved"))},[W,S,f,L,I,t]),J=a().useCallback(()=>{let e=localStorage.getItem(d);if(!e)return;let t=new Blob([e],{type:"application/json"}),i=URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download="tastingpos-layout.json",document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(i)},[]),H=a().useCallback(()=>{let t=window.prompt(e("Paste layout JSON:","Paste layout JSON:"));if(t){if(!function(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}(t)){G(e("Invalid JSON","Invalid JSON"));return}localStorage.setItem(d,t),window.location.reload()}},[]),V=a().useCallback(()=>{localStorage.removeItem(d),window.location.reload()},[]),K=a().useMemo(()=>t.filter(e=>p(e,W)===C),[t,C,W]),ee=a().useMemo(()=>L.filter(e=>e.pageId===C),[L,C]),et=a().useMemo(()=>I.filter(e=>e.pageId===C),[I,C]),ei=a().useMemo(()=>[...t].sort((e,t)=>(e.name||"").localeCompare(t.name||"")),[t]),en=a().useMemo(()=>U&&"table"===U.kind?t.find(e=>e.id===U.id)??null:null,[U,t]),er=a().useMemo(()=>U&&"zone"===U.kind?L.find(e=>e.id===U.id)??null:null,[U,L]),ea=a().useMemo(()=>U&&"wall"===U.kind?I.find(e=>e.id===U.id)??null:null,[U,I]),el=a().useCallback((e,t,i,n,r)=>{let a=S[e]??{x:o.x,y:o.y,w:900,h:756},l=a.x+14,s=a.y+44,d=a.x+a.w-n-14,c=a.y+a.h-r-14;return{x:b(t,l,d),y:b(i,s,c)}},[S]),es=(e,t)=>{i(i=>i.map(i=>{if(i.id!==e)return i;let n=t.pageId??i.pageId??W,r=t.obj??m(i),a=Number.isFinite(t.w)?t.w:h(i).w,l=Number.isFinite(t.h)?t.h:h(i).h;if("TABLE_ROUND"===r){let e=Math.max(a,l);a=e,l=e}let s=Number.isFinite(t.x)?t.x:i.x,d=Number.isFinite(t.y)?t.y:i.y,o=el(n,s=u(s),d=u(d),a,l);return{...i,name:t.name??i.name,pageId:n,obj:r,w:a,h:l,x:o.x,y:o.y}}))},ed=(e,t)=>{B(i=>i.map(i=>{if(i.id!==e)return i;let n={...i,...t},r=S[n.pageId]??{x:o.x,y:o.y,w:900,h:756};return n.w=b(n.w,80,r.w-28),n.h=b(n.h,60,r.h-44-14),n.x=b(n.x,r.x+14,r.x+r.w-n.w-14),n.y=b(n.y,r.y+44,r.y+r.h-n.h-14),n}))},eo=(e,t)=>{M(i=>i.map(i=>{if(i.id!==e)return i;let n={...i,...t},r=S[n.pageId]??{x:o.x,y:o.y,w:900,h:756};return n.w=b(n.w,20,r.w-28),n.h=b(n.h,6,r.h-44-14),n.x=b(n.x,r.x+14,r.x+r.w-n.w-14),n.y=b(n.y,r.y+44,r.y+r.h-n.h-14),n}))},ec=(e,t,i,n,a)=>{if(!r.current)return;let l=r.current.getBoundingClientRect(),{x:s,y:d}=$(e.clientX-l.left,e.clientY-l.top);X({pointerId:e.pointerId,kind:t,id:i,offsetX:s-n,offsetY:d-a}),e.currentTarget.setPointerCapture(e.pointerId),e.preventDefault()},ex=(e,t,i,n,a)=>{if(!r.current)return;let l=r.current.getBoundingClientRect(),{x:s,y:d}=$(e.clientX-l.left,e.clientY-l.top);X({pointerId:e.pointerId,kind:t,id:i,offsetX:s,offsetY:d,startW:n,startH:a}),e.currentTarget.setPointerCapture(e.pointerId),e.preventDefault()},eb=e=>{if(q){try{e.currentTarget.releasePointerCapture(q.pointerId)}catch{}X(null),F()}},eu=a().useCallback(()=>{i(e=>{let t=e.reduce((e,t)=>Math.max(e,Number(t.id)||0),0)+1,i=S[C]??{x:o.x,y:o.y,w:900,h:756},n=u(i.x+14+80),r=u(i.y+44+80);return[...e,{id:t,name:`T${t}`,pageId:C,obj:"TABLE_SQUARE",w:92,h:92,x:b(n,i.x+14,i.x+i.w-92-14),y:b(r,i.y+44,i.y+i.h-92-14)}]}),G(e("Table added","Table added")),setTimeout(()=>F(),0)},[C,S,F,i]),ep=a().useCallback(()=>{let t=`p_${Date.now().toString(36)}`;T(e=>[...e,{id:t,label:"NEW PAGE"}]),R(e=>({...e,[t]:{x:o.x,y:o.y,w:900,h:756}})),A(t),G(e("Page added","Page added")),setTimeout(()=>F(),0)},[f.length,F]),em=a().useCallback(t=>{if(f.length<=1){G(e("At least one page is required","At least one page is required"));return}let n=f.find(e=>e.id===t),r=n?.label||e("page","page");if(!window.confirm(`${e("Delete","Delete")} ${r}? ${e("Zones/walls will be removed, tables moved.","Zones/walls will be removed, tables moved.")}`))return;let a=f.filter(e=>e.id!==t),l=a[0]?.id??W;T(a),R(e=>{let i={...e};return delete i[t],i}),B(e=>e.filter(e=>e.pageId!==t)),M(e=>e.filter(e=>e.pageId!==t)),i(e=>e.map(e=>p(e,l)===t?{...e,pageId:l}:e)),C===t&&A(l),setTimeout(()=>F(),0)},[C,W,f,F,i,M,B]),eh=e=>{if(!en)return;let t=en.id;return"S"===e?es(t,{w:72,h:72}):"M"===e?es(t,{w:92,h:92}):"L"===e?es(t,{w:120,h:120}):"RECT"===e?es(t,{w:190,h:92,obj:"TABLE_RECT"}):es(t,{w:280,h:120,obj:"TABLE_RECT"})},eg=a().useMemo(()=>new Map(f.map(e=>[e.id,e])),[f]),ef=eg.get(C)?.label||e("PAGE","PAGE"),ew=Math.max(0,f.findIndex(e=>e.id===C));return(0,n.jsxs)("div",{className:"h-full w-full bg-[#0b0b0e] text-white",children:[n.jsx("div",{className:"px-6 pt-6",children:(0,n.jsxs)("div",{className:"rounded-2xl border border-zinc-800 bg-gradient-to-b from-zinc-950/80 to-black/50 backdrop-blur-xl shadow-[0_20px_60px_rgba(0,0,0,0.6)] overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 px-4 py-3 border-b border-zinc-800/70",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-9 w-9 rounded-xl bg-zinc-900 border border-zinc-800 grid place-items-center",children:n.jsx("div",{className:"h-2.5 w-2.5 rounded bg-amber-500 shadow-[0_0_20px_rgba(245,158,11,0.6)]"})}),(0,n.jsxs)("div",{children:[n.jsx("div",{className:"text-lg font-black leading-tight",children:e("Map Builder","Map Builder")}),n.jsx("div",{className:"text-xs text-zinc-400",children:e("Build map here • During service it’s locked • Offline save","Build map here • During service it’s locked • Offline save")})]})]}),(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("button",{onClick:F,className:y,children:e("SAVE","SAVE")}),n.jsx("button",{onClick:J,className:N,children:e("EXPORT","EXPORT")}),n.jsx("button",{onClick:H,className:N,children:e("IMPORT","IMPORT")}),n.jsx("button",{onClick:V,className:N,children:e("RESET","RESET")})]})]}),(0,n.jsxs)("div",{className:"px-4 py-3 border-b border-zinc-800/70 bg-black/30 flex flex-wrap items-center justify-between gap-3",children:[(0,n.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[f.map(t=>(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>{A(t.id),O(null),P("select")},className:["px-4 py-2 rounded-xl text-xs font-black border transition",C===t.id?"bg-amber-500 text-black border-amber-400":"bg-zinc-950/40 text-zinc-200 border-zinc-800 hover:bg-zinc-900/40"].join(" "),children:t.label}),n.jsx("button",{onClick:e=>{e.stopPropagation(),em(t.id)},className:"h-8 w-8 rounded-xl border border-zinc-800 bg-zinc-950/40 text-zinc-400 hover:text-white hover:border-zinc-700",title:e("Page options","Page options"),children:"⋯"})]},t.id)),(0,n.jsxs)("button",{onClick:ep,className:k,children:["+ ",e("PAGE","PAGE")]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>P("select"),className:"select"===_?z:k,children:e("SELECT","SELECT")}),(0,n.jsxs)("button",{onClick:eu,className:k,children:["+ ",e("TABLE","TABLE")]}),(0,n.jsxs)("button",{onClick:()=>P("zone"),className:"zone"===_?z:k,children:["+ ",e("ZONE","ZONE")]}),(0,n.jsxs)("button",{onClick:()=>P("wall"),className:"wall"===_?z:k,children:["+ ",e("WALL","WALL")]}),U?n.jsx("button",{onClick:()=>{U&&("table"===U.kind&&i(e=>e.filter(e=>e.id!==U.id)),"zone"===U.kind&&B(e=>e.filter(e=>e.id!==U.id)),"wall"===U.kind&&M(e=>e.filter(e=>e.id!==U.id)),O(null),F())},className:k,children:e("DELETE","DELETE")}):null]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-4",children:[(0,n.jsxs)("div",{className:"col-span-3 rounded-2xl border border-zinc-800 bg-black/30 overflow-hidden",children:[n.jsx("div",{className:"px-4 py-3 border-b border-zinc-800/70 bg-zinc-950/40",children:n.jsx("div",{className:"text-xs font-black tracking-widest text-zinc-300",children:e("SETTINGS","SETTINGS")})}),(0,n.jsxs)("div",{className:"p-4 space-y-4",children:[(0,n.jsxs)("div",{className:"rounded-2xl border border-zinc-800 bg-black/25 p-4",children:[n.jsx("div",{className:"text-[11px] font-black tracking-widest text-zinc-500",children:e("PAGE NAME","PAGE NAME")}),(0,n.jsxs)("div",{className:"mt-2 text-sm text-zinc-300",children:[e("Editing:","Editing:")," ",n.jsx("span",{className:"font-black text-white",children:ef})]}),n.jsx("input",{className:j+" mt-2",value:eg.get(C)?.label||"",placeholder:e("(optional label)","(optional label)"),onChange:e=>T(t=>t.map(t=>t.id===C?{...t,label:e.target.value.slice(0,18)}:t)),onBlur:F})]}),(0,n.jsxs)("div",{className:"rounded-2xl border border-zinc-800 bg-black/25 p-4",children:[n.jsx("div",{className:"text-[11px] font-black tracking-widest text-zinc-500",children:e("SELECTED","SELECTED")}),en?(0,n.jsxs)(n.Fragment,{children:[n.jsx("div",{className:"mt-2 text-white font-black",children:en.name}),(0,n.jsxs)("div",{className:"mt-3",children:[n.jsx("div",{className:"text-[11px] font-black tracking-widest text-zinc-500 mb-2",children:e("TABLE NAME / NUMBER","TABLE NAME / NUMBER")}),n.jsx("input",{value:en.name,onChange:e=>{let t=e.target.value.slice(0,12);i(e=>e.map(e=>e.id===en.id?{...e,name:t}:e))},onBlur:F,placeholder:"T12",className:j})]}),(0,n.jsxs)("div",{className:"mt-4",children:[n.jsx("div",{className:"text-[11px] font-black tracking-widest text-zinc-500 mb-2",children:e("OBJECT","OBJECT")}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx(v,{label:e("SQUARE","SQUARE"),active:"TABLE_SQUARE"===m(en),onClick:()=>{es(en.id,{obj:"TABLE_SQUARE"}),F()}}),n.jsx(v,{label:e("ROUND","ROUND"),active:"TABLE_ROUND"===m(en),onClick:()=>{es(en.id,{obj:"TABLE_ROUND"}),F()}}),n.jsx(v,{label:e("RECT","RECT"),active:"TABLE_RECT"===m(en),onClick:()=>{es(en.id,{obj:"TABLE_RECT"}),F()}})]})]}),(0,n.jsxs)("div",{className:"mt-4",children:[n.jsx("div",{className:"text-[11px] font-black tracking-widest text-zinc-500 mb-2",children:e("SIZE PRESETS","SIZE PRESETS")}),(0,n.jsxs)("div",{className:"grid grid-cols-5 gap-2",children:[n.jsx("button",{onClick:()=>eh("S"),className:E,children:"S"}),n.jsx("button",{onClick:()=>eh("M"),className:E,children:"M"}),n.jsx("button",{onClick:()=>eh("L"),className:E,children:"L"}),n.jsx("button",{onClick:()=>eh("RECT"),className:E,children:"RECT"}),n.jsx("button",{onClick:()=>eh("BIG"),className:E,children:"BIG"})]})]}),(0,n.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[n.jsx(w,{label:e("Width","Width"),children:n.jsx("input",{type:"number",value:h(en).w,onChange:e=>{let t=b(parseInt(e.target.value||"0",10),60,560);es(en.id,{w:t})},onBlur:F,className:j})}),n.jsx(w,{label:e("Height","Height"),children:n.jsx("input",{type:"number",value:h(en).h,onChange:e=>{let t=b(parseInt(e.target.value||"0",10),60,360);es(en.id,{h:t})},onBlur:F,className:j})})]}),(0,n.jsxs)("div",{className:"mt-4",children:[n.jsx("div",{className:"text-[11px] font-black tracking-widest text-zinc-500 mb-2",children:e("PAGE","PAGE")}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:f.map(e=>n.jsx("button",{onClick:()=>{es(en.id,{pageId:e.id}),F()},className:["px-3 py-2 rounded-xl text-[11px] font-black border transition",p(en,W)===e.id?"bg-amber-500 text-black border-amber-400":"bg-zinc-950 text-zinc-200 border-zinc-800 hover:bg-zinc-900"].join(" "),children:"(p.label || p.id).slice(0, 8)"},e.id))})]})]}):null,er?(0,n.jsxs)(n.Fragment,{children:[n.jsx("div",{className:"mt-2 text-white font-black",children:e("Zone","Zone")}),n.jsx("div",{className:"mt-2 text-xs text-zinc-500",children:e("Name optional","Name optional")}),n.jsx("input",{placeholder:e("(optional label)","(optional label)"),value:er.label??"",onChange:e=>ed(er.id,{label:e.target.value}),onBlur:F,className:j+" mt-2"})]}):null,ea?(0,n.jsxs)(n.Fragment,{children:[n.jsx("div",{className:"mt-2 text-white font-black",children:e("Wall","Wall")}),n.jsx("div",{className:"mt-2 text-xs text-zinc-500",children:e("Resize with handle","Resize with handle")})]}):null,en||er||ea?null:n.jsx("div",{className:"mt-2 text-sm text-zinc-500",children:e("Tap a table / zone / wall.","Tap a table / zone / wall.")})]}),(0,n.jsxs)("div",{children:[n.jsx("div",{className:"text-[11px] font-black tracking-widest text-zinc-500 mb-2",children:e("ALL TABLES","ALL TABLES")}),n.jsx("div",{className:"space-y-2 max-h-[30vh] overflow-auto pr-1",children:ei.map(e=>{let t=U?.kind==="table"&&U.id===e.id;return(0,n.jsxs)("button",{onClick:()=>{O({kind:"table",id:e.id}),A(p(e,W)),P("select")},className:["w-full text-left rounded-2xl border px-3 py-3 transition",t?"border-amber-500/70 bg-amber-500/10":"border-zinc-800 bg-zinc-950/30 hover:bg-zinc-900/30"].join(" "),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("div",{className:"font-black text-white",children:e.name}),n.jsx("span",{className:"text-[10px] font-black px-2 py-1 rounded-lg border border-zinc-800 bg-black/40 text-zinc-300",children:(eg.get(p(e,W))?.label||p(e,W)).slice(0,10)})]}),(0,n.jsxs)("div",{className:"mt-2 text-xs text-zinc-500 font-mono tabular-nums",children:[m(e)," • ",h(e).w,"\xd7",h(e).h]})]},e.id)})})]})]})]}),(0,n.jsxs)("div",{className:"col-span-9 rounded-2xl border border-zinc-800 bg-black/30 overflow-hidden",children:[(0,n.jsxs)("div",{className:"px-4 py-3 border-b border-zinc-800/70 bg-zinc-950/40 flex items-center justify-between",children:[n.jsx("div",{className:"text-xs font-black tracking-widest text-zinc-300",children:ef}),n.jsx("div",{className:"text-xs text-zinc-500",children:`${e("Mode","Mode")}: ${_.toUpperCase()} • ${e("Drag","Drag")} • ${e("Resize handle","Resize handle")}`})]}),(0,n.jsxs)("div",{ref:r,className:"relative touch-none",style:{height:Y.h+90},onPointerMove:e=>{if(!q||!r.current)return;let n=r.current.getBoundingClientRect(),{x:a,y:l}=$(e.clientX-n.left,e.clientY-n.top);if("table"===q.kind){i(e=>e.map(e=>{if(e.id!==q.id)return e;let t=p(e,W),i=m(e),{w:n,h:r}=h(e),s=a-q.offsetX,d=l-q.offsetY,o=el(t,u(s),u(d),n,r);return{...e,x:o.x,y:o.y,obj:i,pageId:t}}));return}if("zone"===q.kind){B(e=>e.map(e=>{if(e.id!==q.id)return e;let t=S[e.pageId]??{x:o.x,y:o.y,w:900,h:756},i=a-q.offsetX,n=l-q.offsetY,r=u(i),s=u(n),d=t.x+14,c=t.y+44,x=t.x+t.w-e.w-14,p=t.y+t.h-e.h-14;return{...e,x:b(r,d,x),y:b(s,c,p)}}));return}if("wall"===q.kind){M(e=>e.map(e=>{if(e.id!==q.id)return e;let t=S[e.pageId]??{x:o.x,y:o.y,w:900,h:756},i=a-q.offsetX,n=l-q.offsetY,r=u(i),s=u(n),d=t.x+14,c=t.y+44,x=t.x+t.w-e.w-14,p=t.y+t.h-e.h-14;return{...e,x:b(r,d,x),y:b(s,c,p)}}));return}if("resizeTable"===q.kind){let e=q.id,i=t.find(t=>t.id===e);if(!i)return;let n=a-q.offsetX,r=l-q.offsetY,s=u((q.startW??h(i).w)+n),d=u((q.startH??h(i).h)+r);if(s=b(s,60,560),d=b(d,60,360),"TABLE_ROUND"===m(i)){let e=Math.max(s,d);s=e,d=e}es(e,{w:s,h:d});return}if("resizeZone"===q.kind){let e=q.id,t=L.find(t=>t.id===e);if(!t)return;let i=a-q.offsetX,n=l-q.offsetY;ed(e,{w:u((q.startW??t.w)+i),h:u((q.startH??t.h)+n)});return}if("resizeWall"===q.kind){let e=q.id,t=I.find(t=>t.id===e);if(!t)return;let i=a-q.offsetX,n=l-q.offsetY;eo(e,{w:u((q.startW??t.w)+i),h:u((q.startH??t.h)+n)});return}},onPointerUp:eb,onPointerCancel:eb,onPointerLeave:eb,onPointerDown:e=>{if(!r.current)return;let t=r.current.getBoundingClientRect(),{x:i,y:n}=$(e.clientX-t.left,e.clientY-t.top);if(i>=Y.x+14&&i<=Y.x+Y.w-14&&n>=Y.y+44&&n<=Y.y+Y.h-14){if("zone"===_){let e={id:c(),pageId:C,x:u(i-120),y:u(n-80),w:240,h:160};e.x=b(e.x,Y.x+14,Y.x+Y.w-e.w-14),e.y=b(e.y,Y.y+44,Y.y+Y.h-e.h-14),B(t=>[e,...t]),O({kind:"zone",id:e.id}),P("select"),F();return}if("wall"===_){let e={id:c(),pageId:C,x:u(i-140),y:u(n),w:280,h:10};e.x=b(e.x,Y.x+14,Y.x+Y.w-e.w-14),e.y=b(e.y,Y.y+44,Y.y+Y.h-e.h-14),M(t=>[e,...t]),O({kind:"wall",id:e.id}),P("select"),F();return}O(null)}},children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-zinc-950/50 to-black/80"}),n.jsx("div",{className:"absolute inset-0 pointer-events-none shadow-[inset_0_0_120px_rgba(0,0,0,0.85)]"}),n.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.06]",style:{backgroundImage:"linear-gradient(to right, rgba(255,255,255,0.12) 1px, transparent 1px), linear-gradient(to bottom, rgba(255,255,255,0.12) 1px, transparent 1px)",backgroundSize:"20px 20px"}}),(0,n.jsxs)("div",{className:"absolute rounded-2xl border border-zinc-800/80 overflow-hidden",style:{left:Y.x,top:Y.y,width:Y.w,height:Y.h},children:[n.jsx("div",{className:`absolute inset-0 bg-gradient-to-b ${g[ew%g.length]}`}),n.jsx("div",{className:"absolute inset-0 bg-black/18"}),(0,n.jsxs)("div",{className:"relative h-11 px-4 flex items-center justify-between border-b border-zinc-800/70 bg-zinc-950/40",children:[n.jsx("div",{className:"text-[11px] font-black tracking-widest text-zinc-200",children:e("MAP","MAP")}),(0,n.jsxs)("div",{className:"text-[10px] text-zinc-500 font-mono tabular-nums",children:[Y.w,"\xd7",Y.h]})]})]}),ee.map(e=>{let t=U?.kind==="zone"&&U.id===e.id,i=Q(e.x,e.y);return(0,n.jsxs)("div",{className:["absolute rounded-2xl border overflow-hidden",t?"border-amber-400/80":"border-zinc-800/80","bg-zinc-900/10"].join(" "),style:{left:i.x,top:i.y,width:e.w,height:e.h},onPointerDown:t=>{t.stopPropagation(),O({kind:"zone",id:e.id}),ec(t,"zone",e.id,e.x,e.y)},onClick:t=>{t.stopPropagation(),O({kind:"zone",id:e.id})},children:[e.label?n.jsx("div",{className:"absolute top-2 left-2 text-[10px] font-black px-2 py-1 rounded-lg border border-zinc-800 bg-black/40 text-zinc-200",children:e.label}):null,n.jsx("div",{className:"absolute right-1 bottom-1 h-4 w-4 rounded bg-zinc-950/70 border border-zinc-800 cursor-nwse-resize",onPointerDown:t=>{t.stopPropagation(),O({kind:"zone",id:e.id}),ex(t,"resizeZone",e.id,e.w,e.h)}})]},e.id)}),et.map(e=>{let t=U?.kind==="wall"&&U.id===e.id,i=Q(e.x,e.y);return n.jsx("div",{className:["absolute rounded border",t?"border-amber-400/80":"border-zinc-800/80","bg-zinc-500/40"].join(" "),style:{left:i.x,top:i.y,width:e.w,height:e.h},onPointerDown:t=>{t.stopPropagation(),O({kind:"wall",id:e.id}),ec(t,"wall",e.id,e.x,e.y)},onClick:t=>{t.stopPropagation(),O({kind:"wall",id:e.id})},children:n.jsx("div",{className:"absolute right-1 bottom-1 h-4 w-4 rounded bg-zinc-950/70 border border-zinc-800 cursor-nwse-resize",onPointerDown:t=>{t.stopPropagation(),O({kind:"wall",id:e.id}),ex(t,"resizeWall",e.id,e.w,e.h)}})},e.id)}),K.map(e=>{let t=U?.kind==="table"&&U.id===e.id,i=m(e),{w:r,h:a}=h(e),l=Q(e.x,e.y),s=e.reservationName||e?.reservation?.name||e?.reservation?.guestName||e?.guestName||"",d="TABLE_ROUND"===i;return(0,n.jsxs)("div",{className:["absolute border select-none backdrop-blur-md bg-black/35 overflow-hidden",d?"rounded-full":"rounded-2xl",t?"border-amber-400/90 shadow-[0_0_0_1px_rgba(245,158,11,0.35),0_10px_30px_rgba(0,0,0,0.55)]":"border-zinc-800/90 shadow-[0_10px_26px_rgba(0,0,0,0.55)]"].join(" "),style:{left:l.x,top:l.y,width:r,height:a},onPointerDown:t=>{t.stopPropagation(),O({kind:"table",id:e.id}),ec(t,"table",e.id,e.x,e.y)},onClick:t=>{t.stopPropagation(),O({kind:"table",id:e.id})},title:e.name,children:[n.jsx("div",{className:"absolute inset-0 pointer-events-none [background:radial-gradient(circle_at_30%_20%,rgba(255,255,255,0.10),transparent_55%)]"}),(0,n.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[n.jsx("div",{className:d?"text-[18px] font-black text-white":"text-[16px] font-black text-white",children:e.name}),s?n.jsx("div",{className:"mt-1 text-[11px] font-semibold text-zinc-300 max-w-[90%] truncate",children:s}):null]}),n.jsx("div",{className:"absolute right-1 bottom-1 h-4 w-4 rounded bg-zinc-950/70 border border-zinc-800 cursor-nwse-resize",onPointerDown:t=>{t.stopPropagation(),O({kind:"table",id:e.id}),ex(t,"resizeTable",e.id,r,a)}})]},e.id)})]})]})]})]})}),D?n.jsx("div",{className:"fixed left-1/2 -translate-x-1/2 bottom-6 px-4 py-2 rounded-xl border border-zinc-800 bg-zinc-950/90 text-zinc-200 text-sm font-black shadow-[0_20px_60px_rgba(0,0,0,0.65)] backdrop-blur-xl",children:D}):null]})}function w({label:e,children:t}){return(0,n.jsxs)("div",{children:[n.jsx("div",{className:"text-[11px] font-black tracking-widest text-zinc-500",children:e}),n.jsx("div",{className:"mt-1",children:t})]})}function v({label:e,active:t,onClick:i}){return n.jsx("button",{onClick:i,className:["px-3 py-3 rounded-xl text-[11px] font-black border transition text-left",t?"bg-amber-500 text-black border-amber-400":"bg-zinc-950 text-zinc-200 border-zinc-800 hover:bg-zinc-900"].join(" "),children:e})}let j="w-full rounded-xl bg-black/60 border border-zinc-800 text-white px-3 py-2 text-sm outline-none focus:border-amber-500/80",N="px-4 py-2 rounded-xl text-xs font-black border border-zinc-800 bg-black/35 text-zinc-200 hover:bg-zinc-900/40",y="px-4 py-2 rounded-xl text-xs font-black border border-amber-400/70 bg-amber-500 text-black hover:bg-amber-400",k="px-3 py-2 rounded-xl text-xs font-black border border-zinc-800 bg-black/35 text-zinc-200 hover:bg-zinc-900/40",z="px-3 py-2 rounded-xl text-xs font-black border border-amber-400/70 bg-amber-500 text-black",E="px-3 py-2 rounded-xl text-xs font-black border border-zinc-800 bg-black/35 text-zinc-200 hover:bg-zinc-900/40"},868:(e,t,i)=>{"use strict";i.r(t),i.d(t,{$$typeof:()=>l,__esModule:()=>a,default:()=>s});var n=i(8570);let r=(0,n.createProxy)(String.raw`/Users/rohitchandnani/tasting-pos/app/settings/map-builder/page.tsx`),{__esModule:a,$$typeof:l}=r;r.default;let s=(0,n.createProxy)(String.raw`/Users/rohitchandnani/tasting-pos/app/settings/map-builder/page.tsx#default`)},7481:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i(6621);let r=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,n.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),n=t.X(0,[948,982,621,724],()=>i(3546));module.exports=n})();
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{1581:function(e,t,n){Promise.resolve().then(n.bind(n,3794))},3794:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var s=n(7437),r=n(2265),l=n(4774),a=n(4310),c=n(1459);let i="tastingpos_device_role",o="tastingpos_pair_code",d="tastingpos_device_name",x="tastingpos_lan_mode",u="tastingpos_lan_host";function b(){let{t:e}=(0,c.Q)(),{role:t,setRole:n}=(0,l.q)(),{lanStatus:b}=(0,a.mr)(),[m,h]=r.useState(""),[v,g]=r.useState(""),[p,N]=r.useState("OFF"),[f,O]=r.useState("");r.useEffect(()=>{try{let e=localStorage.getItem(i);e&&n(e);let t=localStorage.getItem(o);t&&g(t);let s=localStorage.getItem(d);s&&h(s);let r=localStorage.getItem(x)||"OFF";N(r);let l=localStorage.getItem(u)||"";O(l)}catch(e){}},[]);let S=(e,t,n)=>{try{localStorage.setItem(i,e),localStorage.setItem(d,t),localStorage.setItem(o,n)}catch(e){}},j=(e,t)=>{try{localStorage.setItem(x,e),localStorage.setItem(u,t)}catch(e){}};return(0,s.jsxs)("div",{className:"p-6 max-w-3xl mx-auto",children:[(0,s.jsx)("div",{className:"text-2xl font-black text-white",children:e("Device Setup","Device Setup")}),(0,s.jsx)("div",{className:"text-sm text-zinc-400 mt-1",children:e("Offline-first. Later this pairing code will connect devices over local network.","Offline-first. Later this pairing code will connect devices over local network.")}),(0,s.jsxs)("div",{className:"mt-6 grid gap-4",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-zinc-800 bg-zinc-950/40 p-5",children:[(0,s.jsx)("div",{className:"text-xs font-black text-zinc-300",children:e("DEVICE ROLE","DEVICE ROLE")}),(0,s.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:[{label:"FOH",value:"ROOM"},{label:"KITCHEN",value:"KITCHEN"},{label:"ADMIN",value:"ADMIN"}].map(e=>(0,s.jsx)("button",{onClick:()=>{n(e.value),S(e.value,m,v)},className:["px-4 py-2 rounded-xl text-xs font-black border transition",t===e.value?"bg-amber-500 text-black border-amber-400":"bg-black/40 text-zinc-200 border-zinc-800 hover:bg-zinc-900/40"].join(" "),children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-zinc-800 bg-zinc-950/40 p-5",children:[(0,s.jsx)("div",{className:"text-xs font-black text-zinc-300",children:e("DEVICE NAME","DEVICE NAME")}),(0,s.jsx)("input",{value:m,onChange:e=>{h(e.target.value),S(t||"ROOM",e.target.value,v)},placeholder:e("e.g. FOH iPad 1 / Pass Screen / Expo","e.g. FOH iPad 1 / Pass Screen / Expo"),className:"mt-3 w-full rounded-xl bg-black/60 border border-zinc-800 text-white px-3 py-2 text-sm outline-none focus:border-amber-500/80"})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-zinc-800 bg-zinc-950/40 p-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs font-black text-zinc-300",children:e("PAIRING CODE","PAIRING CODE")}),(0,s.jsx)("div",{className:"text-xs text-zinc-500 mt-1",children:e("Same code on all devices in the restaurant.","Same code on all devices in the restaurant.")})]}),(0,s.jsx)("button",{onClick:()=>{let e=Math.random().toString(36).slice(2,6).toUpperCase();g(e),S(t||"ROOM",m,e)},className:"px-4 py-2 rounded-xl text-xs font-black border border-zinc-800 bg-black/40 text-zinc-200 hover:bg-zinc-900/40",children:e("GENERATE","GENERATE")})]}),(0,s.jsx)("input",{value:v,onChange:e=>{let n=e.target.value.toUpperCase().slice(0,8);g(n),S(t||"ROOM",m,n)},placeholder:"ABCD",className:"mt-3 w-full rounded-xl bg-black/60 border border-zinc-800 text-white px-3 py-2 text-sm outline-none focus:border-amber-500/80 font-mono tracking-widest"})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-zinc-800 bg-zinc-950/40 p-5",children:[(0,s.jsx)("div",{className:"text-xs font-black text-zinc-300",children:e("LAN SYNC","LAN SYNC")}),(0,s.jsx)("div",{className:"text-xs text-zinc-500 mt-1",children:e("Offline sync over local network. One device is HOST, others are CLIENT.","Offline sync over local network. One device is HOST, others are CLIENT.")}),(0,s.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:["OFF","HOST","CLIENT"].map(t=>(0,s.jsx)("button",{onClick:()=>{if(N(t),"HOST"===t&&!f){let e="ws://localhost:3000/ws";O(e),j("HOST",e);return}j(t,f)},className:["px-4 py-2 rounded-xl text-xs font-black border transition",p===t?"bg-amber-500 text-black border-amber-400":"bg-black/40 text-zinc-200 border-zinc-800 hover:bg-zinc-900/40"].join(" "),children:e(t,t)},t))}),"OFF"!==p?(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("div",{className:"text-xs font-black text-zinc-300",children:e("HOST WS URL","HOST WS URL")}),(0,s.jsx)("input",{value:f,onChange:e=>{let t=e.target.value.trim();O(t),j(p,t)},placeholder:"ws://192.168.1.36:3000/ws",className:"mt-2 w-full rounded-xl bg-black/60 border border-zinc-800 text-white px-3 py-2 text-sm outline-none focus:border-amber-500/80 font-mono"}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-zinc-500",children:[e("Host must connect to its own websocket too. Example:","Host must connect to its own websocket too. Example:")," ",(0,s.jsx)("span",{className:"font-mono",children:"ws://192.168.1.36:3000/ws"})]})]}):null,"HOST"===p?(0,s.jsx)("div",{className:"mt-4 text-xs text-amber-300 font-black",children:e("This device is HOST. Keep it running during service.","This device is HOST. Keep it running during service.")}):null,b?(0,s.jsxs)("div",{className:"mt-4 text-xs font-black text-zinc-300",children:[e("STATUS","STATUS"),":"," ",(0,s.jsx)("span",{className:["px-2 py-1 rounded border text-[10px] font-black","CONNECTED"===b?"border-green-600 bg-green-900/25 text-green-200":"CONNECTING"===b?"border-amber-600 bg-amber-900/25 text-amber-200":"border-zinc-700 bg-zinc-900/40 text-zinc-300"].join(" "),children:e(b,b)})]}):null]}),(0,s.jsx)("div",{className:"text-xs text-zinc-500",children:e("Later: we’ll use this role + code to auto-discover a LAN host (wired/Wi-Fi) and sync state without internet.","Later: we’ll use this role + code to auto-discover a LAN host (wired/Wi-Fi) and sync state without internet.")})]})]})}},4774:function(e,t,n){"use strict";n.d(t,{RoleProvider:function(){return a},q:function(){return c}});var s=n(7437),r=n(2265);let l=r.createContext(null);function a(e){let{children:t}=e,[n,a]=r.useState("ROOM"),[c,i]=r.useState(!1);return(0,s.jsx)(l.Provider,{value:{role:n,setRole:a,kitchenAuthed:c,setKitchenAuthed:i},children:t})}function c(){let e=r.useContext(l);if(!e)throw Error("useRole must be used inside RoleProvider");return e}}},function(e){e.O(0,[459,310,971,23,744],function(){return e(e.s=1581)}),_N_E=e.O()}]);
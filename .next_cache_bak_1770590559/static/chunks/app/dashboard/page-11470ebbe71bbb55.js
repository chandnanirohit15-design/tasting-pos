(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{9633:function(e,t,l){Promise.resolve().then(l.bind(l,4591))},4591:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return d}});var n=l(7437),s=l(2265),a=l(4310),r=l(1459);function i(e){var t;return(null==e?void 0:null===(t=e.courseLines)||void 0===t?void 0:t.length)&&(e.courseLines.find(e=>"FIRED"===e.status)||e.courseLines.find(e=>"PENDING"===e.status))||null}function d(){let{t:e}=(0,r.Q)(),{tables:t,hasAllergyFlag:l}=(0,a.mr)(),[i,d]=s.useState(""),[o,u]=s.useState("ALL"),[b,m]=s.useState("ATTENTION"),[N,h]=s.useState(()=>Date.now());s.useEffect(()=>{let e=setInterval(()=>h(Date.now()),1e3);return()=>clearInterval(e)},[]);let v=s.useMemo(()=>t.filter(e=>"SEATED"===e.reservationStatus),[t]),p=s.useMemo(()=>{let e=v.filter(e=>{var t,l;return(null!==(l=null===(t=e.setup)||void 0===t?void 0:t.approval)&&void 0!==l?l:"NONE")==="PENDING"}).length,t=v.filter(e=>{var t,l;return(null!==(l=null===(t=e.setup)||void 0===t?void 0:t.approval)&&void 0!==l?l:"NONE")==="APPROVED"}).length,n=v.filter(e=>{var t;return!!(null===(t=e.setup)||void 0===t?void 0:t.paused)}).length,s=v.filter(e=>{var t;return!!(null===(t=e.setup)||void 0===t?void 0:t.pairing)}).length,a=v.filter(e=>l(e)).length;return{seated:v.length,pending:e,approved:t,paused:n,pairing:s,allergy:a}},[v,l]),g=s.useMemo(()=>{let e=i.trim().toLowerCase();return[...v.filter(t=>!e||(t.name||"").toLowerCase().includes(e)||(t.reservationName||"").toLowerCase().includes(e))].sort((e,t)=>(0,a.pJ)(t,N)-(0,a.pJ)(e,N)).filter(e=>{let t=e.setup;return"ALL"===o||("PAUSED"===o?!!(null==t?void 0:t.paused):"APPROVAL"===o?!!t&&"APPROVED"!==t.approval:"ATTN"!==o||(0,a.mX)(e,N).length>0)})},[v,i,o,N]);return(0,n.jsxs)("div",{className:"h-full w-full bg-[#0f0f12] p-6",children:[(0,n.jsxs)("div",{className:"flex flex-wrap items-end justify-between gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-2xl font-black text-white",children:e("Dashboard","Dashboard")}),(0,n.jsx)("div",{className:"text-sm text-zinc-400 mt-1",children:e("Real-time insights (UI-only).","Real-time insights (UI-only).")})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("label",{className:"text-xs font-black text-zinc-400",children:e("FILTER","FILTER")}),(0,n.jsxs)("select",{value:o,onChange:e=>u(e.target.value),className:"rounded-xl bg-black/60 border border-zinc-800 text-white px-3 py-2 text-xs font-black outline-none",children:[(0,n.jsx)("option",{value:"ALL",children:e("ALL","ALL")}),(0,n.jsx)("option",{value:"ATTN",children:e("NEEDS ATTENTION","NEEDS ATTENTION")}),(0,n.jsx)("option",{value:"PAUSED",children:e("PAUSED","PAUSED")}),(0,n.jsx)("option",{value:"APPROVAL",children:e("WAITING APPROVAL","WAITING APPROVAL")})]})]})]}),(0,n.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,n.jsx)("button",{onClick:()=>m("ATTENTION"),className:["px-4 py-2 rounded-xl text-xs font-black border transition","ATTENTION"===b?"bg-amber-500 text-black border-amber-400":"bg-zinc-950 text-zinc-200 border-zinc-800 hover:bg-zinc-900"].join(" "),children:e("ATTENTION","ATTENTION")}),(0,n.jsx)("button",{onClick:()=>m("PROGRESS"),className:["px-4 py-2 rounded-xl text-xs font-black border transition","PROGRESS"===b?"bg-amber-500 text-black border-amber-400":"bg-zinc-950 text-zinc-200 border-zinc-800 hover:bg-zinc-900"].join(" "),children:e("PROGRESS BOARD","PROGRESS BOARD")})]}),"ATTENTION"===b?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"mt-5 grid grid-cols-6 gap-3",children:[(0,n.jsx)(f,{label:e("SEATED","SEATED"),value:p.seated}),(0,n.jsx)(f,{label:e("APPROVED","APPROVED"),value:p.approved}),(0,n.jsx)(f,{label:e("PENDING","PENDING"),value:p.pending}),(0,n.jsx)(f,{label:e("PAUSED","PAUSED"),value:p.paused}),(0,n.jsx)(f,{label:e("PAIRING","PAIRING"),value:p.pairing}),(0,n.jsx)(f,{label:e("ALLERGY","ALLERGY"),value:p.allergy})]}),(0,n.jsx)("div",{className:"mt-5 flex flex-wrap items-center gap-3",children:(0,n.jsx)("div",{className:"flex-1 min-w-[240px]",children:(0,n.jsx)("input",{value:i,onChange:e=>d(e.target.value),placeholder:e("Search table or reservation…","Search table or reservation…"),className:"w-full rounded-xl bg-black border border-zinc-800 text-white px-4 py-3 text-sm outline-none focus:border-amber-500"})})}),(0,n.jsx)("div",{className:"mt-6 grid grid-cols-4 gap-4",children:0===g.length?(0,n.jsx)("div",{className:"col-span-4 rounded-2xl border border-zinc-800 bg-zinc-900/40 p-6 text-zinc-500",children:e("No seated tables.","No seated tables.")}):g.map(e=>(0,n.jsx)(c,{table:e,now:N},e.id))})]}):(0,n.jsx)(x,{tables:t,now:N,filter:o})]});function f(e){let{label:t,value:l}=e;return(0,n.jsxs)("div",{className:"rounded-2xl border border-zinc-800 bg-zinc-900/30 p-4",children:[(0,n.jsx)("div",{className:"text-[11px] font-black tracking-widest text-zinc-400",children:t}),(0,n.jsx)("div",{className:"text-2xl font-black text-white mt-1",children:l})]})}}function c(e){var t;let{table:l,now:s}=e,{t:i}=(0,r.Q)(),d=l.setup,c=(0,a.mX)(l,s),x=(null==d?void 0:null===(t=d.courseLines)||void 0===t?void 0:t.find(e=>"FIRED"===e.status))||null,u=l.seatedAt?s-l.seatedAt:0;return(0,n.jsxs)("div",{className:"rounded-2xl border border-zinc-800 bg-zinc-950/40 p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,n.jsxs)("div",{className:"text-white font-black",children:[l.name," ",(0,n.jsx)("span",{className:"text-zinc-400",children:l.reservationName||""})]}),(0,n.jsxs)("div",{className:"text-xs font-black text-zinc-300",children:[Math.floor(u/6e4),":",String(Math.floor(u%6e4/1e3)).padStart(2,"0")]})]}),(0,n.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[l.tableLanguage?(0,n.jsx)(o,{children:l.tableLanguage}):null,(null==d?void 0:d.paused)?(0,n.jsx)(o,{tone:"red",children:i("PAUSED","PAUSED")}):null,(null==d?void 0:d.pairing)?(0,n.jsx)(o,{tone:"indigo",children:i("SLOW PACE","SLOW PACE")}):null,d&&"APPROVED"!==d.approval?(0,n.jsx)(o,{tone:"amber",children:i("WAITING APPROVAL","WAITING APPROVAL")}):null]}),(0,n.jsx)("div",{className:"mt-3 text-sm text-zinc-200",children:x?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-zinc-400 font-mono text-xs",children:i("NOW","NOW")})," ",(0,n.jsxs)("span",{className:"font-black",children:["#",x.idx]})," ",x.name]}):(0,n.jsx)("span",{className:"text-zinc-500",children:i("Nothing fired","Nothing fired")})}),c.length?(0,n.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:c.map(e=>(0,n.jsx)(o,{tone:"amber",children:i(e.replaceAll("_"," "),e.replaceAll("_"," "))},e))}):null]})}function o(e){let{children:t,tone:l}=e;return(0,n.jsx)("div",{className:"px-2 py-1 rounded-lg border text-[10px] font-black ".concat("red"===l?"border-red-700 bg-red-900/20 text-red-200":"indigo"===l?"border-indigo-700 bg-indigo-900/20 text-indigo-200":"amber"===l?"border-amber-500/50 bg-amber-500/10 text-amber-200":"border-zinc-800 bg-black/40 text-zinc-200"),children:t})}function x(e){let{tables:t,now:l,filter:s}=e,{t:d}=(0,r.Q)(),c=[...t.filter(e=>"SEATED"===e.reservationStatus)].sort((e,t)=>{var n,s,a,r;let d=null!==(a=null===(n=i(e.setup))||void 0===n?void 0:n.idx)&&void 0!==a?a:9999,c=null!==(r=null===(s=i(t.setup))||void 0===s?void 0:s.idx)&&void 0!==r?r:9999;if(d!==c)return d-c;let o=e.seatedAt?l-e.seatedAt:0;return(t.seatedAt?l-t.seatedAt:0)-o}).filter(e=>{let t=e.setup;return"ALL"===s||("PAUSED"===s?!!(null==t?void 0:t.paused):"APPROVAL"===s?!!t&&"APPROVED"!==t.approval:"ATTN"!==s||(0,a.mX)(e,l).length>0)});return(0,n.jsx)("div",{className:"mt-5 grid grid-cols-3 gap-4",children:c.map(e=>{let t=e.setup,s=i(t),a=function(e){let t=(null==e?void 0:e.courseLines)||[],l=t.length||0;return{total:l,done:t.filter(e=>"DONE"===e.status).length,fired:t.filter(e=>"FIRED"===e.status).length,pending:t.filter(e=>"PENDING"===e.status).length}}(t),r=e.seatedAt?l-e.seatedAt:0;return(0,n.jsxs)("div",{className:"rounded-2xl border border-zinc-800 bg-zinc-950/40 p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,n.jsxs)("div",{className:"text-white font-black",children:[e.name," ",(0,n.jsx)("span",{className:"text-zinc-400",children:e.reservationName||""})]}),(0,n.jsxs)("div",{className:"text-xs font-black text-zinc-300",children:[Math.floor(r/6e4),":",String(Math.floor(r%6e4/1e3)).padStart(2,"0")]})]}),(0,n.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.tableLanguage?(0,n.jsx)(o,{children:e.tableLanguage}):null,(null==t?void 0:t.paused)?(0,n.jsx)(o,{tone:"red",children:d("PAUSED","PAUSED")}):null,(null==t?void 0:t.pairing)?(0,n.jsx)(o,{tone:"indigo",children:d("SLOW PACE","SLOW PACE")}):null,t&&"APPROVED"!==t.approval?(0,n.jsx)(o,{tone:"amber",children:d("WAITING APPROVAL","WAITING APPROVAL")}):null]}),(0,n.jsxs)("div",{className:"mt-3 rounded-xl border border-zinc-800 bg-black/30 p-3",children:[(0,n.jsx)("div",{className:"text-xs text-zinc-500 font-black",children:d("CURRENT","CURRENT")}),s?(0,n.jsxs)("div",{className:"mt-1 text-sm text-white font-black",children:["#",s.idx," ",s.name,(0,n.jsx)("span",{className:"ml-2 text-[10px] font-black px-2 py-1 rounded-lg border border-zinc-800 bg-black/40 text-zinc-200",children:d(s.status,s.status)})]}):(0,n.jsx)("div",{className:"mt-1 text-sm text-zinc-500",children:d("No courses","No courses")})]}),(0,n.jsxs)("div",{className:"mt-3 grid grid-cols-4 gap-2",children:[(0,n.jsxs)("div",{className:"rounded-xl border border-zinc-800 bg-black/30 p-2",children:[(0,n.jsx)("div",{className:"text-[10px] text-zinc-500 font-black",children:d("DONE","DONE")}),(0,n.jsx)("div",{className:"text-sm font-black text-white",children:a.done})]}),(0,n.jsxs)("div",{className:"rounded-xl border border-zinc-800 bg-black/30 p-2",children:[(0,n.jsx)("div",{className:"text-[10px] text-zinc-500 font-black",children:d("FIRED","FIRED")}),(0,n.jsx)("div",{className:"text-sm font-black text-white",children:a.fired})]}),(0,n.jsxs)("div",{className:"rounded-xl border border-zinc-800 bg-black/30 p-2",children:[(0,n.jsx)("div",{className:"text-[10px] text-zinc-500 font-black",children:d("PEND","PEND")}),(0,n.jsx)("div",{className:"text-sm font-black text-white",children:a.pending})]}),(0,n.jsxs)("div",{className:"rounded-xl border border-zinc-800 bg-black/30 p-2",children:[(0,n.jsx)("div",{className:"text-[10px] text-zinc-500 font-black",children:d("TOTAL","TOTAL")}),(0,n.jsx)("div",{className:"text-sm font-black text-white",children:a.total})]})]})]},e.id)})})}}},function(e){e.O(0,[459,310,971,23,744],function(){return e(e.s=9633)}),_N_E=e.O()}]);